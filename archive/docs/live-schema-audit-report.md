# Live Supabase Schema Audit Report

**Generated:** 2025-06-11T19:07:27.648Z  
**Database:** https://lxtkotgfsnahwncgcfnl.supabase.co  
**Audit Type:** Live Database Connection Test

## Executive Summary

- **Tables Accessible:** 18
- **Critical Issues:** 0
- **Warnings:** 0
- **Recommendations:** 0

## Connection Status

- ✅ **profiles** - Has data
- ✅ **user_roles** - Has data
- ✅ **tenant_profiles** - Has data
- ✅ **properties** - Empty
- ✅ **property_images** - Empty
- ✅ **property_applications** - Empty
- ✅ **property_offers** - Empty
- ✅ **user_documents** - Has data
- ✅ **payment_records** - Has data
- ✅ **messages** - Empty
- ✅ **notifications** - Has data
- ✅ **viewing_invitations** - Empty
- ✅ **viewing_slots** - Empty
- ✅ **document_access_requests** - Empty
- ✅ **household_info** - Empty
- ✅ **household_members** - Empty
- ✅ **audit_logs** - Has data
- ✅ **subscribers** - Empty

## Critical Issues



## Warnings



## Schema Comparison with Expected Structure

Based on the TypeScript types in `src/integrations/supabase/types.ts`, the following tables are expected:

### Core Tables
- **profiles** - User basic information
- **user_roles** - Role and subscription management  
- **tenant_profiles** - Detailed tenant information
- **properties** - Property listings
- **property_applications** - Tenant applications
- **user_documents** - Document verification
- **payment_records** - Payment tracking

### Supporting Tables
- **messages** - Communication system
- **notifications** - User notifications
- **viewing_invitations** - Property viewing coordination
- **viewing_slots** - Viewing time management
- **property_images** - Property photos
- **property_offers** - Landlord offers to tenants

### Utility Tables
- **document_access_requests** - Document sharing workflow
- **household_info** - Household composition details
- **household_members** - Individual household members
- **audit_logs** - System audit trail
- **subscribers** - Subscription management

## Recommendations from Previous Audit

Based on the comprehensive audit from June 11, 2025, the following issues were identified:

### High Priority
1. **Fix duplicate is_looking_for_place field** - Remove from either profiles or tenant_profiles
2. **Add verified document re-upload prevention** - Prevent re-uploading approved documents
3. **Implement profile verification workflow** - Add verification status tracking
4. **Add performance indexes** - Critical for matching logic

### Medium Priority
1. **Add data integrity constraints** - Age validation, positive amounts, etc.
2. **Implement document access audit trail** - Track who accesses what documents
3. **Add geographic search optimization** - For location-based matching
4. **Enhance email/phone validation** - Dutch format validation

## Next Steps

1. **Review Critical Issues** - Address any critical issues found in this live audit
2. **Compare with Migration Files** - Verify that recent migrations have been applied
3. **Performance Testing** - Test query performance on large datasets
4. **Security Review** - Verify RLS policies are working correctly
5. **Data Migration** - If schema changes are needed, plan migration strategy

---

*Report generated by Huurly Live Schema Auditor on 2025-06-11T19:07:27.648Z*
