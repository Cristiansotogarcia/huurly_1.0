{
  "meta": {
    "project": "Huurly.nl",
    "version": "1.0.0",
    "date": "2025-07-13",
    "prepared_by": "Manus AI"
  },
  "product_overview": "Huurly.nl is a Dutch two-sided rental marketplace empowering tenants by leveraging detailed verified profiles to attract rental opportunities, while enabling landlords to efficiently find suitable tenants through a reverse-search model.",
  "core_goals": [
    "Simplify the tenant property search by enabling landlords to find tenants.",
    "Enhance trust and transparency via robust verification of tenant profiles.",
    "Streamline landlord tenant acquisition for efficient and reliable matches.",
    "Ensure strict GDPR compliance with sensitive data handling and deletion.",
    "Foster a fair, community-driven rental platform.",
    "Deliver MVP features validating the reverse-search marketplace concept."
  ],
  "key_features": [
    "Multi-step tenant profile creation wizard with personal, employment, household, and motivation details.",
    "User authentication system with registration, login, password reset, and email verification.",
    "Role-based dashboards for tenants, landlords, reviewers, and admin with tailored functionalities.",
    "Property management including listing, search, detailed views, and landlord tools.",
    "Integration with Stripe for subscription payments and management.",
    "Document upload, secure storage, review, approval/rejection with GDPR-compliant deletion.",
    "Messaging system enabling communication between users with notifications.",
    "Admin user and content management with analytics and SEO tools.",
    "Secure file storage via Cloudflare R2 with signed URLs for sensitive data.",
    "Robust notification system for in-app and email alerts."
  ],
  "user_flow_summary": [
    "Tenant self-registers via multi-step signup, completes detailed profile and uploads verification documents.",
    "Tenant subscribes to the platform using Stripe and manages subscription status on their dashboard.",
    "Landlord accesses tenant search interface, applies filters, views verified tenant profiles, and contacts tenants.",
    "Reviewer accesses document queue, reviews submitted documents, approves or rejects, triggering notifications and GDPR-compliant document deletion.",
    "Admin manages users and roles, oversees document verification, content, SEO, and sends automated email communications."
  ],
  "validation_criteria": [
    "Tenant registration requires email verification and password strength enforcement.",
    "Role-based access control prevents unauthorized access to user dashboards and actions.",
    "Document uploads enforce file type and size restrictions with secure storage and deletion post-review.",
    "Stripe payments process successfully, with clear subscription status updates and cancellation options.",
    "Dashboard displays accurate profile, document, and notification states for each user role.",
    "Notification system correctly delivers both in-app and email alerts tied to user actions.",
    "Admin interfaces allow user management, content updates, and analytics visualization with proper access.",
    "The system meets performance requirements: page load times under 3 seconds and 95% API responses under 500ms.",
    "Application interfaces and messages are fully localized to Dutch.",
    "GDPR compliance verified via automated document deletion, audit logging, and data subject right enforcement."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "TailwindCSS",
      "Supabase",
      "PostgreSQL",
      "Stripe",
      "React Hook Form",
      "Zod",
      "React Query",
      "Zustand",
      "Radix UI",
      "Cloudflare R2",
      "AWS S3"
    ],
    "features": [
      {
        "name": "Enhanced Profile Creation Modal",
        "description": "Multi-step profile creation wizard with 7 steps for tenant registration including personal info, employment, household, housing preferences, guarantor info, references, and motivation",
        "files": [
          "src/components/modals/EnhancedProfileCreationModal.tsx",
          "src/components/modals/ProfileFormNavigation.tsx",
          "src/components/modals/ProfileFormStepper.tsx",
          "src/components/modals/EnhancedProfileSteps",
          "src/components/modals/profileSchema.ts",
          "src/components/modals/stepValidationSchemas.ts"
        ]
      },
      {
        "name": "User Authentication",
        "description": "Complete authentication system with login, signup, password reset, and email verification",
        "files": [
          "src/components/auth/LoginForm.tsx",
          "src/components/auth/SignupForm.tsx",
          "src/components/auth/MultiStepSignupModal.tsx",
          "src/components/auth/ResetPasswordForm.tsx",
          "src/components/auth/ProtectedRoute.tsx",
          "src/hooks/useAuth.ts",
          "src/store/authStore.ts",
          "src/lib/auth.ts"
        ]
      },
      {
        "name": "Dashboard System",
        "description": "Role-based dashboards for tenants (huurders), landlords (verhuurders), property managers (beheerders), and reviewers (beoordelaars)",
        "files": [
          "src/pages/HuurderDashboard.tsx",
          "src/pages/VerhuurderDashboard.tsx",
          "src/pages/BeheerderDashboard.tsx",
          "src/pages/BeoordelaarDashboard.tsx",
          "src/components/dashboard/DashboardContent.tsx",
          "src/components/dashboard/DashboardHeader.tsx",
          "src/components/HuurderDashboard",
          "src/services/DashboardService.ts",
          "src/services/ConsolidatedDashboardService.ts"
        ]
      },
      {
        "name": "Property Management",
        "description": "Property listing, search, detail views, and management functionality",
        "files": [
          "src/pages/PropertySearch.tsx",
          "src/pages/PropertyDetail.tsx",
          "src/pages/PropertyManagement.tsx",
          "src/components/modals/PropertyModal.tsx",
          "src/components/modals/PropertySearchModal.tsx",
          "src/services/PropertyService.ts"
        ]
      },
      {
        "name": "Payment Integration",
        "description": "Stripe payment processing for subscriptions and transactions",
        "files": [
          "src/components/PaymentModal.tsx",
          "src/pages/PaymentSuccess.tsx",
          "src/components/modals/PaymentSuccessModal.tsx",
          "src/services/PaymentService.ts",
          "src/services/OptimizedSubscriptionService.ts",
          "src/lib/stripe.ts",
          "src/lib/stripe-config.ts",
          "src/pages/Subscription/ManageSubscription.tsx"
        ]
      },
      {
        "name": "Document Management",
        "description": "Document upload, review, and management system with file validation",
        "files": [
          "src/components/modals/DocumentUploadModal.tsx",
          "src/components/modals/DocumentReviewModal.tsx",
          "src/components/standard/DocumentsSection.tsx",
          "src/components/standard/DocumentQueue.tsx",
          "src/services/DocumentService.ts",
          "src/components/ui/file-upload.tsx"
        ]
      },
      {
        "name": "User Management",
        "description": "Admin user management with role assignment and user operations",
        "files": [
          "src/components/modals/UserManagementModal.tsx",
          "src/components/standard/UserManagement.tsx",
          "src/pages/admin/UserManagement.tsx",
          "src/services/UserService.ts",
          "src/hooks/useRoleActions.ts"
        ]
      },
      {
        "name": "Matching System",
        "description": "Property-tenant matching algorithm and recommendations",
        "files": [
          "src/services/MatchingService.ts",
          "src/lib/matching.ts",
          "src/pages/ZoekHuurders.tsx"
        ]
      },
      {
        "name": "Messaging System",
        "description": "Internal messaging between users with notifications",
        "files": [
          "src/services/MessageService.ts",
          "src/services/NotificationService.ts"
        ]
      },
      {
        "name": "File Storage",
        "description": "Cloud file storage integration with Cloudflare R2 and AWS S3",
        "files": [
          "src/lib/cloudflare-r2-upload.ts",
          "src/lib/direct-upload.ts",
          "src/lib/storage.ts",
          "src/lib/storage-signed.ts",
          "src/lib/storageAccess.ts",
          "src/hooks/useImageUpload.ts"
        ]
      },
      {
        "name": "Profile Management",
        "description": "User profile creation, editing, and photo management",
        "files": [
          "src/components/ProfilePicture.tsx",
          "src/components/ProfilePictureUpload.tsx",
          "src/components/dashboard/ProfilePhotoSection.tsx",
          "src/components/standard/ProfileOverview.tsx",
          "src/hooks/useHuurder.ts",
          "src/hooks/useHuurderActions.ts",
          "src/utils/profileDataMapper.ts"
        ]
      },
      {
        "name": "Issue Reporting",
        "description": "Bug reporting and issue management system",
        "files": [
          "src/pages/IssueReporting.tsx",
          "src/components/modals/IssueReportModal.tsx",
          "src/components/modals/IssueManagementModal.tsx"
        ]
      }
    ]
  }
}
